<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Activity Dashboard</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root{--bg:#f7fafc;--card:#fff;--muted:#64748b;--accent:#2563eb}
    body{font-family:Inter,system-ui,Arial,sans-serif;margin:0;padding:28px;background:var(--bg);color:#0f172a}
    h1{text-align:center;margin:0 0 6px}
    .sub{text-align:center;color:var(--muted);margin-bottom:18px}
    .wrap{max-width:1100px;margin:0 auto}
    .card{background:var(--card);border-radius:12px;padding:14px;box-shadow:0 8px 24px rgba(2,6,23,0.06);margin-bottom:14px}
    .row{display:flex;gap:12px;align-items:center}
    .col{flex:1}
    .muted{color:var(--muted);font-size:13px}
    .big{font-weight:700;font-size:20px}
    #sitesList{list-style:none;padding:0;margin:0;max-height:320px;overflow:auto}
    #sitesList li{padding:8px;border-radius:8px;background:#f1f5f9;margin-bottom:8px;display:flex;justify-content:space-between}
    .button{display:inline-block;padding:8px 12px;border-radius:8px;border:none;cursor:pointer}
    .btn-primary{background:var(--accent);color:white}
    .btn-ghost{background:transparent;border:1px solid #e2e8f0}
    .controls{display:flex;gap:12px;align-items:center;margin-bottom:12px;flex-wrap:wrap}
    .chart-row{display:flex;gap:12px;align-items:flex-start}
    .chart-card{flex:1;min-width:320px;height:320px;padding:12px}
    .chart-title{font-weight:600;margin-bottom:6px}
    .toggle{display:flex;gap:8px}
    .toggle button{padding:6px 10px;border-radius:8px;border:1px solid #e2e8f0;background:#fff;cursor:pointer}
    .toggle .active{background:var(--accent);color:#fff;border-color:var(--accent)}
    .small-muted{color:var(--muted);font-size:12px}
    input[type="date"]{padding:8px;border-radius:8px;border:1px solid #e6eef8}
    .legend{display:flex;gap:8px;align-items:center;font-size:12px;color:var(--muted)}
    .error{color:#b91c1c}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Activity Dashboard</h1>
    <div class="sub">Shows your activity logged by the extension â€” charts are rendered with SVG (no external libraries)</div>

    <div id="mainArea" class="card">
      <div id="status">Checking login...</div>
    </div>

    <div class="card">
      <div class="controls">
        <div style="display:flex;gap:8px;align-items:center">
          <button id="todayBtn" class="button btn-ghost">Today</button>

          <div class="small-muted">Date range:</div>
          <input id="from" type="date" />
          <input id="to" type="date" />
          <button id="last7" class="button btn-ghost">Last 7d</button>
          <button id="last30" class="button btn-ghost">Last 30d</button>
          <button id="refresh" class="button btn-primary">Refresh</button>
        </div>

        <div style="margin-left:auto;display:flex;gap:8px;align-items:center">
          <div class="small-muted">View</div>
          <div class="toggle">
            <button id="viewSites" class="active">Top Sites</button>
            <button id="viewDays">Daily</button>
          </div>
          <button id="exportCsv" class="button btn-ghost">Export CSV</button>
        </div>
      </div>

      <div class="row" style="margin-bottom:12px">
        <div class="col">
          <div class="small-muted">Total time (range)</div>
          <div id="totalTime" class="big">0s</div>
        </div>
        <div style="width:220px;text-align:right">
          <div class="legend"><span style="width:12px;height:12px;background:var(--accent);display:inline-block;border-radius:2px"></span><span>minutes</span></div>
        </div>
      </div>

      <div class="chart-row">
        <div id="barContainer" class="card chart-card" aria-label="Top sites chart">
          <div class="chart-title">Top sites</div>
          <div id="barChart" style="width:100%;height:240px"></div>
          <div id="barLabels" style="margin-top:8px;font-size:12px;color:var(--muted)"></div>
        </div>

        <div id="lineContainer" class="card chart-card" aria-label="Daily usage chart">
          <div class="chart-title">Daily usage</div>
          <div id="lineChart" style="width:100%;height:240px"></div>
          <div id="lineLabels" style="margin-top:8px;font-size:12px;color:var(--muted)"></div>
        </div>
      </div>

      <h3 style="margin-top:14px">Top Sites (list)</h3>
      <ul id="sitesList"><li class="muted">No data</li></ul>
      
    </div>

    <div style="text-align:center;color:var(--muted);font-size:13px;margin-top:8px">
      <small>If you see "Please login first", open the extension popup and sign in, then refresh this page.</small>
    </div>
  </div>

  <script src="dashboard.js"></script>
</body>
</html>
